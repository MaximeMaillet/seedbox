{
  "_middlewares": [
    {
      "target": "*",
      "action": [
        "apiMiddleware#cors",
        "apiMiddleware#bodyParserJson",
        "apiMiddleware#bodyParserUrlencoded",
        "apiMiddleware#jwt",
        "apiMiddleware#rewriteSession"
      ]
    },
    {
      "target": ["/api/torrents"],
      "type": "inject",
      "action": ["apiMiddleware#multer"]
    }
  ],
  "/api": {
    "/authenticate": {
      "/confirm": {
        "get": "AuthenticateController#confirm"
      },
      "/logout": {
        "get": "AuthenticateController#logout"
      },
      "/login": {
        "post": "AuthenticateController#login"
      },
      "/subscribe": {
        "post": "AuthenticateController#subscribe"
      },
      "/forgot": {
        "post": "AuthenticateController#forgot"
      },
      "/password": {
        "post": "AuthenticateController#passwordPost",
        "/:token": {
          "get": "AuthenticateController#passwordGet"
        }
      }
    },
    "/users": {
      "get": "UserController#getUsers",
      "/:id": {
        "get": "UserController#getUser",
        "patch": "UserController#patchUser",
        "delete": "UserController#deleteUser"
      }
    },
    "/torrents": {
      "_services": ["dtorrent", "tracker", "server"],
      "get": "TorrentController#getTorrents",
      "post": "TorrentController#postTorrent",
      "/:id": {
        "get": "TorrentController#getTorrent",
        "delete": "TorrentController#remove",
        "/download/:fileId": {
          "get": "TorrentController#downloadFile"
        },
        "/pause": {
          "get": "TorrentController#pauseTorrent"
        },
        "/play": {
          "get": "TorrentController#playTorrent"
        }
      }
    }
  }
}